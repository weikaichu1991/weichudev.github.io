<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating Frontend</title>
    <link rel="stylesheet" href="../works-pages.css">
</head>

<body>
    <div class="container" id="container">
        <div class = "topnav">
            <nav class = "subpagesMenu">
                <div class="menu-icon" id="menu-icon">
                    &#9776; <!-- Unicode for the menu icon -->
                </div>
                <ul class="nav-links" id="nav-links">
                    <li><a class = "subpages" href="../../index.html">Home</a></li>
                    <li><a class = "subpages" href="../../About/aboutMe.html">About</a></li>
                    <li><a class = "subpages" href="../../works-pages/works-catalogue.html">Works</a></li>
                    <li><a class = "subpages" href="../../blog-pages/blogs-catalog.html" >Stories</a></li>
                    <li><a class = "subpages" id = "comments" href="../../Comments/comments-page.html">Feedbacks</a></li>
                    <li><a class = "subpages" href="https://www.linkedin.com/in/wei-chu-2428563a?lipi=urn%3Ali%3Apage%3Ad_flagship3_profile_view_base_contact_details%3B0NJxcN7wTTO%2FFzOhjPc2rg%3D%3D" target="_blank">LinkedIn</a></li>
                    <li><a class = "subpages" id = "email" href="mailto: weikai.chu.91@outlook.com" target="_blank">Email</a></li>
                </ul>
                <div class="mobile-top-icon" id="mobile-top-icon">
                    <button onclick="location.href='#container'"><img src="../../images/back-to-top-svgrepo-com.svg"></button>
                </div>
            </nav>
        </div>
        <header class = "siteName" href="../../index.html">
            <h1>Wei's<br>Dev<br>Journal</h1>
        </header>
        <!-- The end of the navigation bar section -->
        
        
        <div class="content">
            <div class="content-title" id="conetentBegin">
                <h1 >Creating the frontend of my website with Github Page </h1>
            </div>
            <div class="tags">
                <button>HTML</button>
                <button>CSS</button>
                <button>JavaScript</button>
                <button>Github Page</button>
                <button>VS Code</button>
            </div>
            
            <div class="content-section">
                <h2>Step 01 | Preparation - Document Management</h2>
                <h3>1. Directory File Structure:</h3>
                <!-- <p class="code-file">workflows.yml</p> -->
                <pre class="code"><code>
.
├── images
│   ├── ... 
│   └── ...(images used in the main page)
├── index.html
├── script.js
├── style.css
└── works-pages
│   ├── terraform-rg
│   │   ├── rg_images
│   │   │   ├── ...
│   │   │   └── ...(images used in this article subpage)
│   │   └── terraform_rg.html
│   ├── works-page.js
│   └── works-pages.css
└── ...(other sub-directory)
                </code></pre>
                <p class="note">
                    <strong>Description:</strong>
                    <ul>
                        <li><h4>The HTML, CSS & JS files for the main page are saved in the root directory of the website.</h4></li>
                        <li><h4>The sub-directory “works-pages”  and other sub-dir. are created to store the web files of other sub sections of the website.</h4></li>
                        <li><h4>Templating subpages responsive behaviours and style - In each sub-dir., a mutual CSS file and JavaScript file will be shared by different article HTML hosted in the children folder (ex: “terraform-rg”) of the sub-directory.</h4></li>
                    </ul>
                </p>
                <h3>2. Using Github Page to host the static version of my website</h3>
                <p class="note">
                    <p>I started to building my website as a static website, and I was eager to find a free of cost method of hosting my website so that I can review my website through mobile devices when I am not at the computer desk. Github Page itself is also a CI/CD solution. The page will be automatically redeployed after newly edited code has been pushed. Here what I have done:</p>
                </p>
                <p class="note">
                    <ol>
                        <li>
                            <h4>Go to ‘setting’ of the Github repository containing the HTML, CSS and JS files of the website. </h4><br>
                            <img src="./article-01-image/image-0.png" class="enlargeable-image" alt="Github Page under Setting Section">
                        </li>
                        <li>
                            <h4>Change the “Branch” to main (or other desired branch) and assign the folder (’ /root ‘ in this case) containing the website files. Then click “save.”</h4><br>
                            <img src="./article-01-image/image-1.png" class="enlargeable-image" alt="Github Page main portal to setup deploy branch">
                        </li>
                        <li>
                            <h4>Navigating to Github Action, and you will find the website has been automatically built and deployed. </h4><br>
                            <img src="./article-01-image/image-2.png" class="enlargeable-image" alt="Github Page main portal to setup deploy branch">
                        </li>
                        <li>
                            <h4>Click the completed job and the url to access the website will be found under the deploy job node.
                            </h4><br>
                            <img src="./article-01-image/image-3.png" class="enlargeable-image" alt="Github Page main portal to setup deploy branch">
                            <p>Now I can use the url to check the deployed website wherever and however I want! </p>
                        </li>
                    </ol>
                </p>
                <h3>3. Using The VS Code Extension ‘ Live Preview’ to Review the Visual Result In Real Time As Soon As The code files are edited.</h3>
                <p class="note">
                    <ul>
                        <li>
                            <h4>The extension installation page in VS Code</h4>
                            <img src="./article-01-image/image-4.png" class="enlargeable-image" alt="The screenshot of extension'Live Preview'">
                        </li>
                        <li>
                            <h4>The application of the extension.</h4>
                            <p>To preview the web page, clicking the window with magnifyinf gladd icon"</p>
                            <img src="./article-01-image/image-5.png" class="enlargeable-image" alt="The screenshot of using the extension'Live Preview'">
                        </li>
                    </ul>
                </p>
                <!-- The end of the step 01 -->
                
                <h2>Step 02 | Creating container for limiting the width of the viewport</h2>
                <p class="note">
                    <p>In order to make sure the web elements that I have included not overflow outside the viewport, I created a viewport container overarching the web page interface to constrain the size of the area where the elements can reach by specifying the max-width or min-width of the media. The following code showcase the code that I have included in the project file:</p>
                </p>
                <h3>HTML:</h3>
                <p class="note">
                    <p>Initiating the viewport container in the meta section of the HTML file.</p>
                </p>
                <p class="code-file">index.html</p>
                <script src="https://gist.github.com/weikaichu1991/910f3488693147fae4bad16074b7db57.js"></script>
                <h3>CSS:</h3>
                <p class="code-file">style.css</p>
                <script src="https://gist.github.com/weikaichu1991/cf2da1b643d738214b9ca3ff13f72baa.js"></script>
                <p class="note">
                    <ol>
                        <li>Firstly, assigning the maximum viewport width that you want the container to impose on the webpage visual.</li>
                        <li>Secondly, before diving into the detail setting of each content module of the webpage, setting up the parameters that will apply to the whole body of the website regardless the media viewport size, such as webpage’s foundational colour, thematic font family, padding size to the edge of the screen.</li>
                        <li>Thirdly, with @media() media queries, specifying the max-width or min-width of the viewport in accordance to the size of the device screen to setup the foundation of the responsive mechanism of web viewing.</li>
                        <li>Last but not least, starting to style content modules and elements by placing the styling code in the media query bucket. </li>
                    </ol>
                </p>
                <!-- The end of step 02 -->
                
                <h2>Step 03 | Creating the Navigation Bar</h2>
                <h3>HTML:</h3>
                <p class="note">
                    <ol>
                        <li>Creating a module with <code>div</code> element for the whole navigation bar secsion.</li>
                        <li>using <code>nav</code> and <code>ul</code> to define the navigations links connecting to the subpages, my Linkedin page and triggering the emailing function.</li>
                    </ol>
                </p>
                <p class="code-file">index.html</p>
                <script src="https://gist.github.com/weikaichu1991/c389f4200db48f8adf7c7ca680c187fe.js"></script>
                
                <h3>CSS:</h3>
                <p class="note">
                    <ol>
                        <li>Starting styling the navigation module in the media query bucket for the computer or tablet-friendly viewport size (<code>@media (min-width: 600px)</code>).</li>
                        <li>After finishing styling the elements for the computer or tablet-friendly viewport size, moving on to the media query bucket that is for mobile-friendly viewport size (<code>@media (max-width:600px)</code>).</li>
                        <li>Moving on to the JavaScript & come back to the CSS file later to further edit the menu-icon and navigation links. Making sure the menu-icon is hidden within the bigger viewport and shown in the smaller viewport.</li>
                    </ol>
                </p>
                <p class="code-file">style.css</p>
                <script src="https://gist.github.com/weikaichu1991/0e17a7c96f0d07eefbccf7961afcd8f6.js"></script>
                <h3>JS:</h3>
                <p class="note">
                    <ol>
                        <li>This code show or hide navigation links when a menu icon is clicked. This a responsive web navigation menu for mobile screen.</li>
                        <li>Firstly, selecting the HTML element with the ID menu-icon using document.getElementById() function.</li>
                        <li>Adding  an event listener .addEventListener('click', function() { ... })to the selected element that listens for a click event. When the element is clicked, the function inside the event listener is executed.</li>
                        <li>Inside the event listener function, using document.getElementById()again to select the element  nav-links and assigns it to the constant navLinks.</li>
                        <li>Using navLinks.classList.toggle('active')to create the mechanism of showing and hiding the menu list.</li>
                    </ol>
                </p>
                <p class="code-file">script.js</p>
                <script src="https://gist.github.com/weikaichu1991/f9fa890edd5b468c3f4c7ae86cf7053a.js"></script>
                <!-- The end of step 03 -->
                <br>
                <h2>Step 04 | Run the GitHub Workflow</h2>
                <p class="note">
                    Commit & Sync the changes to the repository, the workflow will then be triggered.
                </p>
                <img src="../terraform-rg/rg_images/image 8.png" class="enlargeable-image" alt="Image 6">
                <img src="../terraform-rg/rg_images/image 9.png" class="enlargeable-image" alt="Image 6">
                <img src="../terraform-rg/rg_images/image 10_edited-01.jpg" class="enlargeable-image" alt="Image 6">
                <!-- Modal structure -->
                <div id="imageModal" class="modal">
                    <span class="close">&times;</span>
                    <img class="modal-content" id="modalImage">
                    <div id="caption"></div>
                    <button class="zoomIn" id="zoomIn">+</button><br>
                    <button class="zoomOut" id="zoomOut">-</button>
                </div>
            </div>
            <div class="troubleshooting-zone">
                <h1>troubleshoot Notes</h1>
                <hr/>
                <h2>Issue 01 | Wrong Authentication Configuration</h2>
                <h3>Error: No subscription found.</h3>
                <img src="../terraform-rg/rg_images/image 11.png" class="enlargeable-image" alt="finding azure arc">
                <h3>Fix:</h3>
                <p class="description">
                    In the beginning, I used the service principle created through App Registration under the Microsoft Entra ID and the credentials cant be captured.
                </p>
                <img src="../terraform-rg/rg_images/image 12_edited-01.jpg" class="enlargeable-image" alt="Image 6">
                <img src="../terraform-rg/rg_images/image 13_edited-01.jpg" class="enlargeable-image" alt="Image 6">
                <p class="description">
                    I then checked one Azure portal and discovered that Service Principle can also be set-up under Azure Arc. I set up the SPN and changed the value under the GitHub Action secret. This time is works and the authentication was able to be pushed through.
                </p>
                <img src="../terraform-rg/rg_images/image 14-01.jpg" class="enlargeable-image" alt="Image 6">
                <img src="../terraform-rg/rg_images/image 16_edited-01.jpg" class="enlargeable-image" alt="Image 6">
                <h3>Further Investigation:</h3>
                <p class="description">
                    At the moment I am still investigating why it wouldn’t work SPN set up with App Registration. Few direction for testing:
                    <ul class="description">
                        <li><p><strong>User privilege</strong> - at the moment there are no role has been assigned under my Azure Arc SPN, and I am the contributor to the App Registration SPN. I am the owner to both. But I am able to login to Azure Cli with former method, and was failed to login in with the later method.</p></li>
                        <li><p><strong>Difference of the 2 methods</strong> - From what I have understood, Azure Arc seems is more for multiple cloud resource management. The app registration is more specific app and function oriented. It makes more sense to go with SPN created by Azure Arc as I am aiming for creating an Azure cloud resource. But more need to be investigated.</p></li>
                    </ul>
                </p>
                <!-- The end of issue 01 -->

                <hr/>
                <h2>Issue 02 | No permissions to register Resource Providers.</h2>
                <h3>Error:</h3> 
                <p class="description">Terraform does not have the necessary permissions to register Resource Providers. Terraform automatically attempts to register the Azure Resource Providers it supports, to ensure it is able to provision resources.</p>
                <img src="../terraform-rg/rg_images/image 17.png" class="enlargeable-image" alt="finding azure arc">
                <img src="../terraform-rg/rg_images/image 18.png" class="enlargeable-image" alt="Image 6">
                <h3>Fix:</h3>
                <p class="description">
                    At the moment, I simply disable the Resource Provider Registration by modifying the code in the provider.tf file.
                </p>
                <img src="../terraform-rg/rg_images/image_20.png" class="enlargeable-image" alt="finding azure arc">
                <img src="../terraform-rg/rg_images/image_21.png" class="enlargeable-image" alt="Image 6">
                <h3>Further Investigation:</h3>
                <p class="description">
                    I found out that the error indicates that SPN does not have authorization to perform certain actions over the specified scope. Investigation direction:
                    <ul class="description">
                        <li><p>Configuring the necessary permissions under the SPN so that the privilege to registering resource provider is assigned</p></li>
                        <li><p>Double checking <a href="https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs#resource-provider-registrations">Azure Resource Provider Registrations</a> documentation and see if re-registering the resource providers is needed.</p></li>
                    </ul>
                </p>
                <!-- The end of issue 02 -->
                
                <hr/>
                <h2>Issue 03 | Role Assignment is Missing</h2>
                <h3>Error:</h3>
                <p class="description">
                    The client does not have authorization to perform action 'Microsoft.Resources/subscriptions/ resourcegroups/ read' over scope '/ subscriptions/ ***/ resourcegroups/weichudev_terraform_RG' or the scope is invalid.
                </p>
                <img src="../terraform-rg/rg_images/image 19.png" class="enlargeable-image" alt="Image 6">
                <h3>Fix:</h3>
                <p class="description">
                    Using the following command line to assign Contributor role to the SPN. 
                </p>
                <pre class="code"><code>
$ az role assignment create --assignee "(SPN ObjectID)" -
-role "Contributor" --scope "/subscriptions/(SubscriptionID)
                </code></pre>
                <h3>Note:</h3>
                <p class="description">
                    I noticed that the Client ID and Object ID that has been mentioned in the GitHub job error message actually means the Object ID of SPN from an Enterprise Application under EntraID which was created at the same time when a SPN was created in Azure Arc. But when assigning the role to the SPN, the Object ID from the Azure ARC is still targeted which is stored in the GitHub Action Secret.
                </p>
            </div>
            
            <section id="commentsSection">

            </section>
        </div>

        <!-- The end of content section -->
        <div>
            <div class="footer">
                <hr>
                <p>
                    <a class = "subpages" href="../../index.html">Home</a>
                    <a class = "subpages" href="../../About/aboutMe.html" >About</a>
                    <a class = "subpages" href="../works-catalogue.html" >Works</a>
                    <a class = "subpages" href="../../blog-pages/blogs-catalog.html" >Stories</a>
                    <a class = "subpages" id = "comments" href="../../Comments/comments-page.html" >Feedbacks</a>
                    <a class = "subpages" href="https://www.linkedin.com/in/wei-chu-2428563a?lipi=urn%3Ali%3Apage%3Ad_flagship3_profile_view_base_contact_details%3B0NJxcN7wTTO%2FFzOhjPc2rg%3D%3D" target="_blank">LinkedIn</a>
                    <a class = "subpages" id = "email" href="mailto: weikai.chu.91@outlook.com" target="_blank">Email-Me</a>
                </p>
                <h4>*<br><br>Designed by Wei Chu</h4>
                </div>
            </div>
    </div>
</body>

<script src="./article-01-firstFrontend.js"></script>
</html>